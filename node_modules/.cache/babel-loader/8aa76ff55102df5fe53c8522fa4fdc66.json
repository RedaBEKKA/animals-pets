{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC\\\\Desktop\\\\BigNova-Projects\\\\BigNova-Pets Animals\\\\animals-pets\\\\src\\\\pages\\\\OrganizationInfo.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport { Header, Title } from \"../components\";\nimport Container from \"@material-ui/core/Container\";\nimport misterCoockyApi from \"../constante/apiUrl\";\n/**\r\n * Composant d'affichage des données d'une organisation\r\n * @param props\r\n * @returns {*}\r\n * @constructor\r\n */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction OrganizationInfo(props) {\n  _s();\n\n  const [userPro, setUserPro] = useState(null);\n  const [userAdmin, setUserAdmin] = useState(false);\n  const [offerOrga, setOfferOrga] = useState([]);\n  const [typesOrga, setTypesOrga] = useState([]);\n  /**\r\n   * Récupération de l'utilisateur pro et de l'organisation\r\n   */\n\n  useEffect(() => {\n    if (props.organizationName) {\n      fetch(`${misterCoockyApi.misterCoockyApi}/graphql`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          query: `\n                        query{​​​​​​​\n                            userPro(id:\"${localStorage.getItem('userId')}\"){​​​​​​​\n                                id\n                                user{\n                                    name\n                                    role{\n                                        name\n                                    }\n                                }\n                            }​​​​​​​\n                        }`\n        })\n      }).then(res => res.json()).then(function (result) {\n        setUserAdmin(result.data.userPro.user.role.name === \"ROLE_ADMIN\");\n      }); //Récupération de l'organisation\n\n      fetch(`${misterCoockyApi.misterCoockyApi}/graphql`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          query: `\n                        query{​​​​​​​\n                            getUserProByOrganizationName(name:\"${props.organizationName}\"){​​​​​​​\n                                id,\n                                user{\n                                    id\n                                    name\n                                    email\n                                    phoneNumber\n                                }\n                                organization{\n                                    id\n                                    name\n                                    postalAddress{\n                                        street\n                                    }\n                                    supplier{\n                                        id\n                                        name\n                                    }\n                                }\n                            }​​​​​​​\n                        }`\n        })\n      }).then(res => res.json()).then(function (result) {\n        setUserPro(result.data.getUserProByOrganizationName);\n      }); //Récupération des types d'orga de l'organisation\n\n      fetch(`${misterCoockyApi.misterCoockyApi}/typeOrga/${props.organizationName}`, {}).then(res => res.json()).then(function (result) {\n        setTypesOrga(result.join(', '));\n      }); //Récupération des offres de l'orga\n\n      fetch(`${misterCoockyApi.misterCoockyApi}/offerOrga/${props.organizationName}`, {}).then(res => res.json()).then(function (result) {\n        setOfferOrga(result.join(', '));\n      });\n    }\n  }, []);\n\n  if (userAdmin === true) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this), userPro ? /*#__PURE__*/_jsxDEV(Container, {\n        children: [/*#__PURE__*/_jsxDEV(Title, {\n          name: \"Profile de: \" + props.organizationName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Utilisateur Pro\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 3,\n            children: \"Identifiant\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 3,\n            children: userPro.id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Organisation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 3,\n            children: \"Identifiant\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 3,\n            children: userPro.organization.id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 3,\n            children: \"Nom\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 3,\n            children: userPro.organization.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 3,\n            children: \"Types d'organisation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 3,\n            children: typesOrga\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 3,\n            children: \"Offres\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 3,\n            children: offerOrga\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 3,\n            children: \"Adresse Postale\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 6,\n            children: userPro.organization.postalAddress.street\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 3,\n            children: \"Nom fournisseur\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 3,\n            children: userPro.organization.supplier.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Utilisateur\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 3,\n            children: \"Identifiant\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 3,\n            children: userPro.user.id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 3,\n            children: \"Nom\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 3,\n            children: userPro.user.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 3,\n            children: \"T\\xE9l\\xE9phone\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 3,\n            children: userPro.user.phoneNumber\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 3,\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 3,\n            children: userPro.user.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 21\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Access denied\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 13\n      }, this), \"Vous n'avez pas acc\\xE8s \\xE0 cette page, veuillez contacter le support Datagrowb pour plus de renseignements\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 16\n    }, this);\n  }\n}\n\n_s(OrganizationInfo, \"zUw67sdy1BXhWc5Ca9QXqBDPAC0=\");\n\n_c = OrganizationInfo;\nexport default OrganizationInfo;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrganizationInfo\");","map":{"version":3,"sources":["C:/Users/PC/Desktop/BigNova-Projects/BigNova-Pets Animals/animals-pets/src/pages/OrganizationInfo.js"],"names":["React","useEffect","useState","Grid","Header","Title","Container","misterCoockyApi","OrganizationInfo","props","userPro","setUserPro","userAdmin","setUserAdmin","offerOrga","setOfferOrga","typesOrga","setTypesOrga","organizationName","fetch","method","headers","body","JSON","stringify","query","localStorage","getItem","then","res","json","result","data","user","role","name","getUserProByOrganizationName","join","id","organization","postalAddress","street","supplier","phoneNumber","email"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport {Header, Title} from \"../components\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport misterCoockyApi from \"../constante/apiUrl\";\r\n\r\n/**\r\n * Composant d'affichage des données d'une organisation\r\n * @param props\r\n * @returns {*}\r\n * @constructor\r\n */\r\nfunction OrganizationInfo(props) {\r\n    const [userPro, setUserPro] = useState(null);\r\n    const [userAdmin, setUserAdmin] = useState(false);\r\n    const [offerOrga, setOfferOrga] = useState([]);\r\n    const [typesOrga, setTypesOrga] = useState([]);\r\n\r\n    /**\r\n     * Récupération de l'utilisateur pro et de l'organisation\r\n     */\r\n    useEffect(() => {\r\n        if (props.organizationName) {\r\n\r\n            fetch(`${misterCoockyApi.misterCoockyApi}/graphql`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({\r\n                    query: `\r\n                        query{​​​​​​​\r\n                            userPro(id:\"${localStorage.getItem('userId')}\"){​​​​​​​\r\n                                id\r\n                                user{\r\n                                    name\r\n                                    role{\r\n                                        name\r\n                                    }\r\n                                }\r\n                            }​​​​​​​\r\n                        }`,\r\n                }),\r\n            })\r\n                .then((res) => res.json())\r\n                .then(function (result) {\r\n                    setUserAdmin(result.data.userPro.user.role.name === \"ROLE_ADMIN\")\r\n                });\r\n\r\n             //Récupération de l'organisation\r\n            fetch(`${misterCoockyApi.misterCoockyApi}/graphql`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({\r\n                    query: `\r\n                        query{​​​​​​​\r\n                            getUserProByOrganizationName(name:\"${props.organizationName}\"){​​​​​​​\r\n                                id,\r\n                                user{\r\n                                    id\r\n                                    name\r\n                                    email\r\n                                    phoneNumber\r\n                                }\r\n                                organization{\r\n                                    id\r\n                                    name\r\n                                    postalAddress{\r\n                                        street\r\n                                    }\r\n                                    supplier{\r\n                                        id\r\n                                        name\r\n                                    }\r\n                                }\r\n                            }​​​​​​​\r\n                        }`,\r\n                }),\r\n            })\r\n                .then((res) => res.json())\r\n                .then(function (result) {\r\n                    setUserPro(result.data.getUserProByOrganizationName);\r\n                });\r\n            //Récupération des types d'orga de l'organisation\r\n            fetch(`${misterCoockyApi.misterCoockyApi}/typeOrga/${props.organizationName}`, {})\r\n                .then((res) => res.json())\r\n                .then(function (result) {\r\n                    setTypesOrga(result.join(', '))\r\n                });\r\n            //Récupération des offres de l'orga\r\n            fetch(`${misterCoockyApi.misterCoockyApi}/offerOrga/${props.organizationName}`, {})\r\n                .then((res) => res.json())\r\n                .then(function (result) {\r\n                    setOfferOrga(result.join(', '))\r\n                })\r\n        }\r\n    }, []);\r\n\r\n    if (userAdmin === true) {\r\n        return (\r\n            <div>\r\n                <Header/>\r\n                {userPro ?\r\n                    <Container>\r\n                        <Title name={\"Profile de: \" + props.organizationName}/>\r\n                        <h3>Utilisateur Pro</h3>\r\n                        <Grid container>\r\n                            <Grid item xs={6} sm={3}>\r\n                                Identifiant\r\n                            </Grid>\r\n                            <Grid item xs={6} sm={3}>\r\n                                {userPro.id}\r\n                            </Grid>\r\n                        </Grid>\r\n\r\n                        <h3>Organisation</h3>\r\n                        <Grid container>\r\n                            <Grid item xs={6} sm={3}>\r\n                                Identifiant\r\n                            </Grid>\r\n                            <Grid item xs={6} sm={3}>\r\n                                {userPro.organization.id}\r\n                            </Grid>\r\n                        </Grid>\r\n                        <Grid container>\r\n                            <Grid item xs={6} sm={3}>\r\n                                Nom\r\n                            </Grid>\r\n                            <Grid item xs={6} sm={3}>\r\n                                {userPro.organization.name}\r\n                            </Grid>\r\n                        </Grid>\r\n                        <Grid container>\r\n                            <Grid item xs={6} sm={3}>\r\n                                Types d'organisation\r\n                            </Grid>\r\n                            <Grid item xs={6} sm={3}>\r\n                                {typesOrga}\r\n                            </Grid>\r\n                        </Grid>\r\n                        <Grid container>\r\n                            <Grid item xs={6} sm={3}>\r\n                                Offres\r\n                            </Grid>\r\n                            <Grid item xs={6} sm={3}>\r\n                                {offerOrga}\r\n                            </Grid>\r\n                        </Grid>\r\n\r\n                        <Grid container>\r\n                            <Grid item xs={6} sm={3}>\r\n                                Adresse Postale\r\n                            </Grid>\r\n                            <Grid item xs={6} sm={6}>\r\n                                {userPro.organization.postalAddress.street}\r\n                            </Grid>\r\n                        </Grid>\r\n                        <Grid container>\r\n                            <Grid item xs={6} sm={3}>\r\n                                Nom fournisseur\r\n                            </Grid>\r\n                            <Grid item xs={6} sm={3}>\r\n                                {userPro.organization.supplier.name}\r\n                            </Grid>\r\n                        </Grid>\r\n\r\n                        <h3>Utilisateur</h3>\r\n                        <Grid container>\r\n                            <Grid item xs={6} sm={3}>\r\n                                Identifiant\r\n                            </Grid>\r\n                            <Grid item xs={6} sm={3}>\r\n                                {userPro.user.id}\r\n                            </Grid>\r\n                        </Grid>\r\n                        <Grid container>\r\n                            <Grid item xs={6} sm={3}>\r\n                                Nom\r\n                            </Grid>\r\n                            <Grid item xs={6} sm={3}>\r\n                                {userPro.user.name}\r\n                            </Grid>\r\n                        </Grid>\r\n                        <Grid container>\r\n                            <Grid item xs={6} sm={3}>\r\n                                Téléphone\r\n                            </Grid>\r\n                            <Grid item xs={6} sm={3}>\r\n                                {userPro.user.phoneNumber}\r\n                            </Grid>\r\n                        </Grid>\r\n                        <Grid container>\r\n                            <Grid item xs={6} sm={3}>\r\n                                Email\r\n                            </Grid>\r\n                            <Grid item xs={6} sm={3}>\r\n                                {userPro.user.email}\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Container> : null\r\n                }\r\n            </div>\r\n        )\r\n    } else {\r\n        return <Container>\r\n            <h2>Access denied</h2>\r\n            Vous n'avez pas accès à cette page, veuillez contacter le support Datagrowb pour plus de renseignements\r\n        </Container>\r\n    }\r\n}\r\n\r\nexport default OrganizationInfo\r\n"]},"metadata":{},"sourceType":"module"}