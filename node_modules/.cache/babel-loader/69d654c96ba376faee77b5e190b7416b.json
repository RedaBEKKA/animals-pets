{"ast":null,"code":"var _jsxFileName = \"/media/reda/F4C8104CC810100A/Project/React-RN/animals-pets/src/pages/HomeAdmin.js\",\n    _s = $RefreshSig$();\n\nimport { Box, Container } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Header } from '../components';\nimport Button from \"@material-ui/core/Button\";\nimport { colors } from \"../themes/colors\";\nimport misterCoockyApi from \"../constante/apiUrl\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1\n  },\n  centerElements: {\n    height: '100vh',\n    display: 'flex',\n    'justify-content': 'center',\n    'align-items': 'center'\n  }\n}));\n/**\n * Page principale pour un utilisateur pro admin\n * @returns {*}\n * @constructor\n */\n\nfunction HomeAdmin() {\n  _s();\n\n  const classes = useStyles();\n  const [userAdmin, setUserAdmin] = useState(false);\n  /**\n   * On regarde s'il s'agit bien d'un admin\n   */\n\n  useEffect(() => {\n    fetch(`${misterCoockyApi.misterCoockyApi}/graphql`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        query: `\n                    query{​​​​​​​\n                        userPro(id:\"${localStorage.getItem('userId')}\"){​​​​​​​\n                            id\n                            user{\n                                name\n                                role{\n                                    name\n                                }\n                            }\n                        }​​​​​​​\n                    }`\n      })\n    }).then(res => res.json()).then(function (result) {\n      var _result$data$userPro$;\n\n      setUserAdmin(((_result$data$userPro$ = result.data.userPro.user.role) === null || _result$data$userPro$ === void 0 ? void 0 : _result$data$userPro$.name) === \"ROLE_ADMIN\");\n    });\n  }, []);\n\n  if (userAdmin === true) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        className: classes.centerElements,\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          my: 5,\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            spacing: 5,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => window.location.href = '/filesControlPanel',\n              className: classes.btn,\n              variant: \"contained\",\n              style: {\n                backgroundColor: colors.brown\n              },\n              children: \"Contr\\xF4le de fichiers\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Access denied\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }, this), \"Vous n'avez pas acc\\xE8s \\xE0 cette page, veuillez contacter le support Datagrowb pour plus de renseignements\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 16\n    }, this);\n  }\n}\n\n_s(HomeAdmin, \"M8+qVJme/Va9HYpwd0fmd1LJay0=\", false, function () {\n  return [useStyles];\n});\n\n_c = HomeAdmin;\nexport default HomeAdmin;\n\nvar _c;\n\n$RefreshReg$(_c, \"HomeAdmin\");","map":{"version":3,"sources":["/media/reda/F4C8104CC810100A/Project/React-RN/animals-pets/src/pages/HomeAdmin.js"],"names":["Box","Container","React","useEffect","useState","Grid","makeStyles","Header","Button","colors","misterCoockyApi","useStyles","theme","root","flexGrow","centerElements","height","display","HomeAdmin","classes","userAdmin","setUserAdmin","fetch","method","headers","body","JSON","stringify","query","localStorage","getItem","then","res","json","result","data","userPro","user","role","name","window","location","href","btn","backgroundColor","brown"],"mappings":"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","sourcesContent":["import {Box, Container} from '@material-ui/core'\nimport React, {useEffect, useState} from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport {makeStyles} from '@material-ui/core/styles';\nimport {Header} from '../components';\nimport Button from \"@material-ui/core/Button\";\nimport {colors} from \"../themes/colors\";\nimport misterCoockyApi from \"../constante/apiUrl\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        flexGrow: 1,\n    },\n    centerElements: {\n        height: '100vh',\n        display: 'flex',\n        'justify-content': 'center',\n        'align-items': 'center'\n    }\n}));\n\n/**\n * Page principale pour un utilisateur pro admin\n * @returns {*}\n * @constructor\n */\nfunction HomeAdmin() {\n    const classes = useStyles();\n    const [userAdmin, setUserAdmin] = useState(false);\n\n    /**\n     * On regarde s'il s'agit bien d'un admin\n     */\n    useEffect(() => {\n        fetch(`${misterCoockyApi.misterCoockyApi}/graphql`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                query: `\n                    query{​​​​​​​\n                        userPro(id:\"${localStorage.getItem('userId')}\"){​​​​​​​\n                            id\n                            user{\n                                name\n                                role{\n                                    name\n                                }\n                            }\n                        }​​​​​​​\n                    }`,\n            }),\n        })\n            .then((res) => res.json())\n            .then(function (result) {\n                setUserAdmin(result.data.userPro.user.role?.name === \"ROLE_ADMIN\")\n            });\n    }, []);\n    if (userAdmin === true) {\n        return (<div>\n            <Header/>\n            <Container className={classes.centerElements}>\n                <Box my={5}>\n                    <Grid container spacing={5}>\n                        <Button onClick={() => window.location.href = '/filesControlPanel'} className={classes.btn}\n                                variant=\"contained\" style={{backgroundColor: colors.brown}}>Contrôle de fichiers</Button>\n                    </Grid>\n                </Box>\n            </Container>\n        </div>)\n    } else {\n        return <Container>\n            <h2>Access denied</h2>\n            Vous n'avez pas accès à cette page, veuillez contacter le support Datagrowb pour plus de renseignements\n        </Container>\n    }\n}\n\nexport default HomeAdmin\n"]},"metadata":{},"sourceType":"module"}