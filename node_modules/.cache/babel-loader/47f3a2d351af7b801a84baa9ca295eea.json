{"ast":null,"code":"var _jsxFileName = \"D:\\\\All - Projects\\\\PROJECTS - Gitkraken\\\\Project-12 - BigNova PetsAnimals\\\\animals-pets\\\\src\\\\components\\\\Header.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport useScrollTrigger from '@material-ui/core/useScrollTrigger';\nimport Slide from '@material-ui/core/Slide';\nimport { colors } from '../themes/colors';\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Menu from \"@material-ui/core/Menu\";\nimport Button from \"@material-ui/core/Button\";\nimport Icon from \"@material-ui/core/Icon\";\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport misterCoockyApi from \"../constante/apiUrl\";\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport { PersistentDrawerLeft } from '.';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst drawerWidth = 240;\n/**\r\n * Permet de gérer le menu déroulant\r\n * @param props\r\n * @returns {*}\r\n * @constructor\r\n */\n\nfunction HideOnScroll(props) {\n  _s();\n\n  const {\n    children,\n    window\n  } = props;\n  const trigger = useScrollTrigger({\n    target: window ? window() : undefined\n  });\n  return /*#__PURE__*/_jsxDEV(Slide, {\n    appear: false,\n    direction: \"down\",\n    in: !trigger,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 9\n  }, this);\n}\n\n_s(HideOnScroll, \"EC2GbbZl9x3XKoXLVx1H89cOBi0=\", false, function () {\n  return [useScrollTrigger];\n});\n\n_c = HideOnScroll;\nHideOnScroll.propTypes = {\n  window: PropTypes.func\n};\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1\n  },\n  menuButton: {\n    marginRight: theme.spacing(2)\n  },\n  title: {\n    flexGrow: 1\n  },\n  appBar: {\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    }),\n    backgroundColor: colors.brown\n  },\n  appBarShift: {\n    width: `calc(100% - ${drawerWidth}px)`,\n    marginLeft: drawerWidth,\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen\n    })\n  }\n}));\n/***\r\n * Header principal de l'application\r\n * @param props\r\n * @returns {*}\r\n * @constructor\r\n */\n\nexport default function Header(props) {\n  _s2();\n\n  const classes = useStyles();\n  const theme = useTheme();\n  const [open, setOpen] = React.useState(false);\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [userName, setUserName] = useState(null);\n  const [admin, setAdmin] = useState(false);\n  /**\r\n   * Récupération du userpro\r\n   */\n\n  useEffect(() => {\n    //si utilisateur non connecté\n    if (localStorage.getItem('userId') === null && localStorage.getItem('organizationId') === null && localStorage.getItem('supplierId') === null) {\n      window.location.href = '/signIn';\n    } else {\n      fetch(`${misterCoockyApi.misterCoockyApi}/graphql`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          query: `\n                    query{​​​​​​​\n                        userPro(id:\"${localStorage.getItem('userId')}\"){​​​​​​​\n                            id\n                            user{\n                                name\n                                role{\n                                    name\n                                }\n                            }\n                            organization{\n                                name\n                            }\n                        }​​​​​​​\n                    }`\n        })\n      }).then(res => res.json()).then(json => {\n        if (json.data.userPro) {\n          var _json$data$userPro$us;\n\n          setAdmin((_json$data$userPro$us = json.data.userPro.user.role) === null || _json$data$userPro$us === void 0 ? void 0 : _json$data$userPro$us.name);\n          setUserName(json.data.userPro.organization.name);\n        }\n      });\n    }\n  }, []);\n  /**\r\n   * lors du clic du menu déroulant\r\n   * @param event\r\n   */\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n  /**\r\n   * Lors du clic sur déconnexion\r\n   */\n\n\n  const handleDisconnect = () => {\n    localStorage.setItem('userId', null);\n    localStorage.setItem('organizationId', null);\n    localStorage.setItem('supplierId', null);\n    window.location.href = '/signIn';\n  };\n\n  const handleProfile = () => {\n    window.location.href = '/userProfile';\n  };\n  /**\r\n   * lors de la fermeture du menu déroulant\r\n   */\n\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.root,\n      children: /*#__PURE__*/_jsxDEV(AppBar, {\n        position: \"static\",\n        style: {\n          backgroundColor: colors.brown\n        },\n        children: /*#__PURE__*/_jsxDEV(Toolbar, {\n          children: [/*#__PURE__*/_jsxDEV(PersistentDrawerLeft, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            className: classes.title,\n            onClick: () => {\n              admin === \"ROLE_ADMIN\" ? window.location.href = '/homeAdmin' : window.location.href = '/home';\n            },\n            style: {\n              cursor: 'pointer'\n            },\n            children: \"Mister Coocky\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 25\n          }, this), userName !== null ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              style: {\n                color: colors.white,\n                fontSize: '16px'\n              },\n              endIcon: /*#__PURE__*/_jsxDEV(Icon, {\n                children: /*#__PURE__*/_jsxDEV(ArrowDropDownIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 99\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 93\n              }, this),\n              onClick: handleClick,\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  marginTop: '4px'\n                },\n                children: [userName, admin === \"ROLE_ADMIN\" ? \" [Admin]\" : null]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Menu, {\n              id: \"simple-menu\",\n              anchorEl: anchorEl,\n              keepMounted: true,\n              open: Boolean(anchorEl),\n              onClose: handleClose,\n              children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                onClick: handleProfile,\n                children: \"Profil\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                onClick: handleDisconnect,\n                children: \"Se d\\xE9connecter\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 29\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 154,\n    columnNumber: 9\n  }, this);\n}\n\n_s2(Header, \"Y/g9bZmnnzRvsQqnP2AqUuqIIeI=\", false, function () {\n  return [useStyles, useTheme];\n});\n\n_c2 = Header;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"HideOnScroll\");\n$RefreshReg$(_c2, \"Header\");","map":{"version":3,"sources":["D:/All - Projects/PROJECTS - Gitkraken/Project-12 - BigNova PetsAnimals/animals-pets/src/components/Header.js"],"names":["React","useEffect","useState","PropTypes","AppBar","Toolbar","Typography","useScrollTrigger","Slide","colors","MenuItem","Menu","Button","Icon","ArrowDropDownIcon","misterCoockyApi","makeStyles","useTheme","PersistentDrawerLeft","drawerWidth","HideOnScroll","props","children","window","trigger","target","undefined","propTypes","func","useStyles","theme","root","flexGrow","menuButton","marginRight","spacing","title","appBar","transition","transitions","create","easing","sharp","duration","leavingScreen","backgroundColor","brown","appBarShift","width","marginLeft","easeOut","enteringScreen","Header","classes","open","setOpen","anchorEl","setAnchorEl","userName","setUserName","admin","setAdmin","localStorage","getItem","location","href","fetch","method","headers","body","JSON","stringify","query","then","res","json","data","userPro","user","role","name","organization","handleClick","event","currentTarget","handleDisconnect","setItem","handleProfile","handleClose","cursor","color","white","fontSize","marginTop","Boolean"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport useScrollTrigger from '@material-ui/core/useScrollTrigger';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport {colors} from '../themes/colors';\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Icon from \"@material-ui/core/Icon\";\r\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\r\nimport misterCoockyApi from \"../constante/apiUrl\";\r\nimport {makeStyles, useTheme} from '@material-ui/core/styles';\r\nimport {PersistentDrawerLeft} from '.';\r\n\r\nconst drawerWidth = 240;\r\n\r\n\r\n/**\r\n * Permet de gérer le menu déroulant\r\n * @param props\r\n * @returns {*}\r\n * @constructor\r\n */\r\nfunction HideOnScroll(props) {\r\n    const { children, window } = props;\r\n    const trigger = useScrollTrigger({ target: window ? window() : undefined });\r\n    return (\r\n        <Slide appear={false} direction=\"down\" in={!trigger}>\r\n            {children}\r\n        </Slide>\r\n    );\r\n}\r\nHideOnScroll.propTypes = {\r\n    window: PropTypes.func,\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        flexGrow: 1,\r\n    },\r\n    menuButton: {\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    title: {\r\n        flexGrow: 1,\r\n    },\r\n\r\n    appBar: {\r\n        transition: theme.transitions.create(['margin', 'width'], {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.leavingScreen,\r\n        }),\r\n        backgroundColor: colors.brown,\r\n    },\r\n    appBarShift: {\r\n        width: `calc(100% - ${drawerWidth}px)`,\r\n        marginLeft: drawerWidth,\r\n        transition: theme.transitions.create(['margin', 'width'], {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n    },\r\n}));\r\n\r\n\r\n/***\r\n * Header principal de l'application\r\n * @param props\r\n * @returns {*}\r\n * @constructor\r\n */\r\nexport default function Header(props) {\r\n\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const [open, setOpen] = React.useState(false);\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n    const[userName, setUserName] = useState(null);\r\n    const[admin, setAdmin] = useState(false);\r\n\r\n\r\n    /**\r\n     * Récupération du userpro\r\n     */\r\n    useEffect(() => {\r\n        //si utilisateur non connecté\r\n        if(localStorage.getItem('userId') === null && localStorage.getItem('organizationId') === null && localStorage.getItem('supplierId') === null){\r\n            window.location.href = '/signIn';\r\n        }else{\r\n            fetch(`${misterCoockyApi.misterCoockyApi}/graphql`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({\r\n                    query: `\r\n                    query{​​​​​​​\r\n                        userPro(id:\"${localStorage.getItem('userId')}\"){​​​​​​​\r\n                            id\r\n                            user{\r\n                                name\r\n                                role{\r\n                                    name\r\n                                }\r\n                            }\r\n                            organization{\r\n                                name\r\n                            }\r\n                        }​​​​​​​\r\n                    }`,\r\n                }),\r\n            })\r\n                .then((res) => res.json())\r\n                .then((json) => {\r\n                    if(json.data.userPro){\r\n                        setAdmin(json.data.userPro.user.role?.name);\r\n                        setUserName(json.data.userPro.organization.name)\r\n                    }\r\n                })\r\n        }\r\n    }, []);\r\n\r\n    /**\r\n     * lors du clic du menu déroulant\r\n     * @param event\r\n     */\r\n    const handleClick = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    /**\r\n     * Lors du clic sur déconnexion\r\n     */\r\n    const handleDisconnect= () => {\r\n        localStorage.setItem('userId', null);\r\n        localStorage.setItem('organizationId', null);\r\n        localStorage.setItem('supplierId', null);\r\n        window.location.href = '/signIn';\r\n    };\r\n    const handleProfile = () => {\r\n        window.location.href = '/userProfile';\r\n    };\r\n\r\n    /**\r\n     * lors de la fermeture du menu déroulant\r\n     */\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n    return (\r\n        <React.Fragment>\r\n            <div className={classes.root}>\r\n                <AppBar position=\"static\" style={{backgroundColor: colors.brown}}>\r\n                    <Toolbar>\r\n                        <PersistentDrawerLeft/>\r\n                        <Typography variant=\"h6\" className={classes.title}  onClick={() => {admin === \"ROLE_ADMIN\"? window.location.href = '/homeAdmin' : window.location.href = '/home'}} style={{cursor:'pointer'}}>\r\n                            Mister Coocky\r\n                        </Typography>\r\n                        {userName !== null ?\r\n                            <div>\r\n                            <Button style={{color: colors.white, fontSize:'16px'}} endIcon={<Icon><ArrowDropDownIcon/></Icon>} onClick={handleClick}>\r\n                                <span style={{marginTop:'4px'}}>{userName}{admin === \"ROLE_ADMIN\"? \" [Admin]\":null}</span>\r\n                            </Button>\r\n\r\n                            <Menu\r\n                                id=\"simple-menu\"\r\n                                anchorEl={anchorEl}\r\n                                keepMounted\r\n                                open={Boolean(anchorEl)}\r\n                                onClose={handleClose}\r\n                            >\r\n                                <MenuItem onClick={handleProfile}>Profil</MenuItem>\r\n                                <MenuItem onClick={handleDisconnect}>Se déconnecter</MenuItem>\r\n                            </Menu>\r\n                            </div>\r\n                                : null\r\n                        }\r\n                    </Toolbar>\r\n                </AppBar>\r\n            </div>\r\n        </React.Fragment>\r\n\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}